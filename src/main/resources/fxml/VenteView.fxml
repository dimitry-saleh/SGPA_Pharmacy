<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.pharmacy.sgpa.controller.VenteController"
            stylesheets="@../css/styles.css"
            style="-fx-background-color: #F4F6F8;"
            prefHeight="700.0" prefWidth="1100.0">

    <top>
        <HBox styleClass="top-bar" alignment="CENTER_LEFT" spacing="20">
            <padding><Insets top="15" right="20" bottom="15" left="20"/></padding>
            <VBox>
                <Label text="SGPA PHARMA" styleClass="app-logo-text"/>
                <Label text="Point de Vente (POS)" styleClass="page-title"/>
            </VBox>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="RETOUR STOCK" onAction="#showStock" styleClass="btn-secondary">
                <graphic>
                    <SVGPath content="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" fill="#546E7A" scaleX="0.8" scaleY="0.8"/>
                </graphic>
            </Button>
        </HBox>
    </top>

    <center>
        <HBox spacing="25" style="-fx-padding: 25;">

            <VBox spacing="15" HBox.hgrow="ALWAYS" styleClass="card-pane">
                <HBox alignment="CENTER_LEFT" spacing="15">
                    <StackPane styleClass="icon-bg-teal">
                        <SVGPath content="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#009688"/>
                    </StackPane>
                    <VBox>
                        <Label text="Catalogue Médicaments" styleClass="section-header"/>
                        <Label text="Recherchez et ajoutez des produits au panier" styleClass="subtitle-text"/>
                    </VBox>
                </HBox>

                <HBox fx:id="searchBarGroup" alignment="CENTER_LEFT" styleClass="search-bar">
                    <SVGPath content="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#90A4AE" scaleX="0.8" scaleY="0.8"/>
                    <TextField fx:id="txtSearch" promptText="Scanner ou taper le nom..." style="-fx-background-color: transparent;" HBox.hgrow="ALWAYS"/>
                </HBox>

                <TableView fx:id="tableMedicaments" VBox.vgrow="ALWAYS" styleClass="modern-table">
                    <columns>
                        <TableColumn fx:id="colMedId" text="Réf" prefWidth="60"/>
                        <TableColumn fx:id="colMedNom" text="Désignation" prefWidth="250"/>
                        <TableColumn fx:id="colMedStock" text="Stock" prefWidth="80" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colMedPrix" text="Prix Unit." prefWidth="100" style="-fx-alignment: CENTER-RIGHT;"/>
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                </TableView>

                <HBox spacing="15" alignment="CENTER_LEFT" styleClass="action-bar">
                    <Label text="Quantité :" styleClass="field-label-bright"/>
                    <TextField fx:id="txtQuantity" text="1" prefWidth="80" styleClass="input-field" style="-fx-alignment: CENTER;"/>

                    <Region HBox.hgrow="ALWAYS"/>

                    <Button text="AJOUTER AU PANIER" onAction="#addToBasket" styleClass="btn-primary" prefHeight="40">
                        <graphic>
                            <SVGPath content="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z" fill="WHITE"/>
                        </graphic>
                    </Button>
                </HBox>
            </VBox>

            <VBox spacing="0" prefWidth="380" minWidth="350" styleClass="receipt-paper">

                <VBox styleClass="receipt-header-section">
                    <Label text="TICKET DE CAISSE" styleClass="receipt-title"/>
                    <Label text="#Brouillon-En-Cours" styleClass="receipt-subtitle"/>
                </VBox>

                <Separator/>

                <TableView fx:id="tablePanier" VBox.vgrow="ALWAYS" styleClass="modern-table-small">
                    <columns>
                        <TableColumn fx:id="colPanierNom" text="Article" prefWidth="180"/>
                        <TableColumn fx:id="colPanierQte" text="Qté" prefWidth="50" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colPanierTotal" text="Total" prefWidth="90" style="-fx-alignment: CENTER-RIGHT; -fx-font-weight: bold;"/>
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                </TableView>

                <Separator/>

                <VBox styleClass="receipt-footer-section" spacing="5">
                    <HBox alignment="CENTER_LEFT">
                        <Label text="TOTAL À PAYER" style="-fx-font-weight: bold; -fx-text-fill: #546E7A;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="lblTotal" text="0.00 €" styleClass="pos-total-display"/>
                    </HBox>
                </VBox>

                <VBox spacing="10" style="-fx-padding: 15;">
                    <CheckBox fx:id="chkSurOrdonnance" text="Vente sur Ordonnance (Scanner)" styleClass="checkbox-modern"/>

                    <Button text="VALIDER &amp; ENCAISSER" maxWidth="Infinity" onAction="#processSale" styleClass="btn-success-large">
                        <graphic>
                            <SVGPath content="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="WHITE" scaleX="1.2" scaleY="1.2"/>
                        </graphic>
                    </Button>

                    <Button text="ANNULER / VIDER" maxWidth="Infinity" onAction="#clearBasket" styleClass="btn-danger-outline"/>
                </VBox>
            </VBox>

        </HBox>
    </center>
</BorderPane>